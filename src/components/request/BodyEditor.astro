---
import CodeViewer from "../shared/CodeViewer.astro";
import chevronDown from "../../assets/icons/chevron-down.svg?raw";
import { mockRequest } from "../../data/mock-request";

const bodyModes = ["none", "form-data", "x-www-form-urlencoded", "raw", "binary", "GraphQL"];
---

<div>
	<!-- Body mode selector -->
	<div class="flex items-center gap-4 mb-4">
		{bodyModes.map((mode) => (
			<label class="inline-flex items-center gap-2 cursor-pointer">
				<input
					type="radio"
					name="body-mode"
					value={mode}
					checked={mode === "raw"}
					class="text-pm-accent"
				/>
				<span class="text-sm text-pm-text-primary">{mode}</span>
			</label>
		))}

		{/* Content type dropdown for raw mode */}
		<pm-dropdown class="relative inline-block ml-auto">
			<button
				type="button"
				class="inline-flex items-center gap-2 px-3 py-1.5 bg-pm-bg-tertiary hover:bg-pm-bg-elevated transition-colors text-sm text-pm-text-primary rounded"
				data-dropdown-trigger
				aria-haspopup="true"
				aria-expanded="false"
			>
				<span>JSON</span>
				<div class="w-4 h-4 text-pm-text-secondary" aria-hidden="true">
					<Fragment set:html={chevronDown} />
				</div>
			</button>
			<div
				class="hidden absolute top-full right-0 mt-1 bg-pm-bg-elevated border border-pm-border rounded shadow-lg z-50 min-w-[100px]"
				data-dropdown-panel
				role="listbox"
			>
				{["JSON", "XML", "HTML", "Text"].map((type, index) => (
					<button
						type="button"
						class="w-full text-left px-3 py-2 hover:bg-pm-bg-tertiary transition-colors text-sm text-pm-text-primary"
						role="option"
						aria-selected={index === 0 ? "true" : "false"}
					>
						{type}
					</button>
				))}
			</div>
		</pm-dropdown>
	</div>

	<!-- Body content viewer -->
	<CodeViewer code={mockRequest.body.raw || ""} language="json" />
</div>

<script>
	import "../../scripts/dropdown.ts";
</script>
