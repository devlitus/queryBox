---
import { mockResponse } from "../../data/mock-response";

const results = mockResponse.testResults || [];
const passedCount = results.filter((r) => r.passed).length;
const totalCount = results.length;
---

<div>
	<!-- Summary bar -->
	<div class="mb-4 p-3 bg-pm-bg-tertiary rounded">
		<div class="text-sm font-semibold text-pm-text-primary">
			{passedCount}/{totalCount} tests passed
		</div>
		<div class="mt-2 h-2 bg-pm-bg-elevated rounded-full overflow-hidden">
			<div
				class="h-full bg-pm-status-success transition-all"
				style={`width: ${(passedCount / totalCount) * 100}%`}
			>
			</div>
		</div>
	</div>

	<!-- Test results list -->
	<div class="space-y-2">
		{results.map((test) => (
			<div
				class={`p-3 rounded border ${
					test.passed
						? "bg-pm-status-success/10 border-pm-status-success/30"
						: "bg-pm-status-error/10 border-pm-status-error/30"
				}`}
			>
				<div class="flex items-center gap-2">
					<div
						class={`flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold ${
							test.passed
								? "bg-pm-status-success text-white"
								: "bg-pm-status-error text-white"
						}`}
						aria-label={test.passed ? "Passed" : "Failed"}
					>
						{test.passed ? "✓" : "✕"}
					</div>
					<div class="flex-1">
						<div class="text-sm font-medium text-pm-text-primary">{test.name}</div>
						{test.error && (
							<div class="mt-1 text-xs text-pm-status-error">{test.error}</div>
						)}
					</div>
					<div class="text-xs text-pm-text-tertiary">{test.duration}ms</div>
				</div>
			</div>
		))}
	</div>
</div>
